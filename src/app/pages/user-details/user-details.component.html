<header class="home">
  <a class="home__anchor" routerLink="/">
    <svg aria-hidden="true" viewBox="0 0 16 16" version="1.1" data-view-component="true" class="octicon octicon-search">
      <path
        d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z">
      </path>
    </svg>
    <p class="home__anchor__txt">Search Another Profile</p>
  </a>
</header>

<main class="profile">
  <section class="profile__info">
    <div class="profile__info__intro">
      <img *ngIf="userData?.avatar_url" class="profile__info__intro__photo" [src]="userData?.avatar_url"
        alt="Profile image">
      <div class="profile__info__intro__container">
        <p *ngIf="userData?.name" class="profile__info__intro__container__name">{{userData?.name}}</p>
        <a *ngIf="userData?.login" class="profile__info__intro__container__username"
          [href]="userData?.html_url">{{userData?.login}}</a>
      </div>
    </div>

    <div class="profile__info__bio">
      <p class="profile__info__bio__txt" *ngIf="userData?.bio">{{userData?.bio}}</p>
    </div>

    <div *ngIf="userData?.followers! > 0 || userData?.following! > 0" class="profile__info__social">
      <svg text="muted" aria-hidden="true" viewBox="0 0 16 16" version="1.1" data-view-component="true"
        class="octicon octicon-people">
        <path
          d="M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z">
        </path>
      </svg>
      <a class="profile__info__social__followers" *ngIf="userData?.followers! > 0"
        [href]="githubUrl+userData?.login+('?tab=followers')">{{userData?.followers}}
        followers</a>
      <p *ngIf="userData?.followers! > 0 && userData?.following! > 0">·</p>
      <a class="profile__info__social__following" *ngIf="userData?.following! > 0"
        [href]="githubUrl+userData?.login+('?tab=following')">{{userData?.following}}
        following</a>
    </div>

    <div class="profile__info__starredRepos">
      <a class="profile__info__starredRepos__anchor" [href]="githubUrl+userData?.login+('?tab=stars')">
        <svg aria-label="star" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16"
          data-view-component="true" class="octicon octicon-star">
          <path
            d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694Z">
          </path>
        </svg>
        <p class="profile__info__starredRepos__anchor__txt">Starred repos</p>
      </a>
    </div>

    <div class="profile__info__location" *ngIf="userData?.location">
      <svg class="octicon octicon-location" viewBox="0 0 16 16" version="1.1" aria-hidden="true">
        <path
          d="m12.596 11.596-3.535 3.536a1.5 1.5 0 0 1-2.122 0l-3.535-3.536a6.5 6.5 0 1 1 9.192-9.193 6.5 6.5 0 0 1 0 9.193Zm-1.06-8.132v-.001a5 5 0 1 0-7.072 7.072L8 14.07l3.536-3.534a5 5 0 0 0 0-7.072ZM8 9a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 9Z">
        </path>
      </svg>
      <p class="profile__info__location__txt">{{userData?.location}}</p>
    </div>

    <div class="profile__info__email" *ngIf="userData?.email">
      <svg class="octicon octicon-mail" viewBox="0 0 16 16" version="1.1" aria-hidden="true">
        <path
          d="M1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25v-8.5C0 2.784.784 2 1.75 2ZM1.5 12.251c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V5.809L8.38 9.397a.75.75 0 0 1-.76 0L1.5 5.809v6.442Zm13-8.181v-.32a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25v.32L8 7.88Z">
        </path>
      </svg>
      <p class="profile__info__email__txt">{{userData?.email}}</p>
    </div>
  </section>


  <section class="profile__repos" *ngIf="userReposDefault?.length! > 0">
    <div class="profile__repos__firstRow">
      <h2 class="profile__repos__firstRow__title">Repos</h2>

      <div class="profile__repos__firstRow__filter">
        <label class="profile__repos__firstRow__filter__label" for="filter">
          <svg aria-label="star" role="img" viewBox="0 0 16 16" version="1.1" data-view-component="true"
            class="octicon octicon-star">
            <path
              d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694Z">
            </path>
          </svg>
          <p class="profile__repos__firstRow__filter__label__txt">>=</p>
        </label>
        <input class="profile__repos__firstRow__filter__input" type="text" inputmode="numeric" name="filter" id="filter"
          placeholder="0" autocomplete="off" [(ngModel)]="filterInputValue" (blur)="filterByStars()"
          (keypress)="onInput($event)">
      </div>
    </div>

    <div class="profile__repos__organizer">
      <div class="profile__repos__organizer__sortByName">
        <button class="profile__repos__organizer__btn" [ngClass]="{active: sortedBy == 'aToZ'}"
          (click)="sortByName(true)">A > Z</button>
        <button class="profile__repos__organizer__btn" [ngClass]="{active: sortedBy == 'zToA'}"
          (click)="sortByName(false)">Z > A</button>
      </div>
      <div class="profile__repos__organizer__sortByStars">
        <button class="profile__repos__organizer__btn" [ngClass]="{active: sortedBy == 'increasingStars'}"
          (click)="sortByStars(true)">★★★ > ★</button>
        <button class="profile__repos__organizer__btn" [ngClass]="{active: sortedBy == 'decreasingStars'}"
          (click)="sortByStars(false)">★ > ★★★</button>
      </div>

    </div>

    <ol *ngIf="userRepos">
      <repo-card *ngFor="let repo of userRepos" [repoInfo]="repo"></repo-card>
    </ol>

    <p *ngIf="userRepos?.length === 0">No repos match your filter criteria.</p>

  </section>

  <div *ngIf="displayLoader" class="profile__loader">
    <loader></loader>
  </div>

  <message *ngIf="message$ | async as message" [message]="message.message" [type]="message.type"></message>
</main>